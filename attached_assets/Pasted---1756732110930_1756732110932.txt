إليك حل موثوق بناءً على تجارب مستخدمين وخبراء التقنيات السابقة الذين واجهوا نفس رسالة الخطأ:


---

المشكلة

ظهور رسالة الخطأ عند نشر المشروع على Vercel:

> "لا يمكن استخدام خاصية functions مع خاصية builds. يرجى إزالة إحداهما."



هذا يعني أنك تستخدم خاصيتين متضاربتين في ملف vercel.json، وهو أمر غير مدعوم في Vercel. لا يمكن الجمع بين functions و builds في نفس الوقت. يجب أن تختار أحدهما. 


---

حلول معتمدة من مستخدمين وخبراء

1. استخدام functions فقط (الحل الموصى به)

يتميّز بأنه يدعم أدوات حديثة مثل تخصيص الذاكرة والمدة (maxDuration) ويوفر إمكانية "Clean URLs". 

مثال على vercel.json باستخدام functions فقط:

{
  "version": 2,
  "functions": {
    "api/**/*.js": {
      "maxDuration": 30
    }
  }
}

هذا الشكل يتيح لك تحديد إعدادات دقيقة لوظائف Serverless.


2. استخدام builds فقط (للتوافق مع الإصدارات القديمة)

يحتفظ بدعم لتوزيع الوظائف لكن بميزات أقل.

مثال:

{
  "version": 2,
  "builds": [
    {
      "src": "api/**/*.js",
      "use": "@vercel/node"
    }
  ]
}



---

تجارب مستخدمين تؤكد الحل:

من Stack Overflow:

مستخدم واجه مشكلة في زيادة maxDuration بينما كان يستخدم builds، ثم انتقل لاستخدام functions فقط واستخراج الوظيفة من خلال كود TypeScript:

> استخدم functions وأضف export const config = { maxDuration: 30 }; داخل ملف الوظيفة نفسها، حتى لو كنت ما زلت تستخدم builds. 



من Reddit:

> “I'm trying to deploy my project to Vercel and I am getting the below error… The issue is because I have a vercel.json file with "builds"… the docs don't really say anything about how to fix this.”
ثم جاء الرد:
“... if you want the settings in Vercel website to be the source of truth then remove it from your config file.” 



يعني: إذا كنت تفضل التحكم عبر Dashboard في إعدادات Build، فاحذف قسم builds من vercel.json.


---

توصية نهائية وخطوات عملية

السيناريو	ما يجب فعله

تريد تحديد maxDuration أو تخصيص وظيفة	استخدم functions فقط، واحذف قسم builds
تحتاج لتطبيقات قديمة أو لا تتطلب تخصيص وظائف	استخدم builds فقط، واحذف قسم functions
تريد استمرارية العمل باستخدام builds لكن تحتاج maxDuration	أضف داخل ملف الوظيفة السطر التالي: export const config = { maxDuration: 30 }; 



---

ملخص سريع:

لا تجمع بين functions و builds معًا.

الحل الأمثل غالبًا هو التحوّل لاستخدام functions فقط إن كنت تحتاج إلى خصائص متقدمة.

يمكنك أيضًا استخدام config داخل الملف نفسه إذا كنت مضطرًا للاحتفاظ بـ builds.


هل ترغب أن أساعدك بمثال عملي بناءً على نوع المشروع لديك؟ فقط أخبرني نوع الإطار أو الملف الذي تستخدمه (مثل Next.js، Express، أو غيرها)، وأعدك بأن أعدّ لك vercel.json مصمم حسب حالتك!

